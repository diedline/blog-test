<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>单行函数-通用函数-多表查询使用 | Died line 的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="####sql语句的注意点  sql语言不区分大小写 关键字不能被缩写也不能被分行 各子句一般要分行写 使用缩进提高语句可读性。  ####基本的sql SELECT语句 123456789101112desc employees; 		// 获取employees的表结构 这个是sql plus中才有的SELECT * from employees;  //查询表中所有数据SELECT EMPL">
<meta property="og:type" content="website">
<meta property="og:title" content="单行函数-通用函数-多表查询使用">
<meta property="og:url" content="https://diedline.github.io/oracle-单行函数-通用函数-多表查询使用/index.html">
<meta property="og:site_name" content="Died line 的博客">
<meta property="og:description" content="####sql语句的注意点  sql语言不区分大小写 关键字不能被缩写也不能被分行 各子句一般要分行写 使用缩进提高语句可读性。  ####基本的sql SELECT语句 123456789101112desc employees; 		// 获取employees的表结构 这个是sql plus中才有的SELECT * from employees;  //查询表中所有数据SELECT EMPL">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-12-20T16:14:54.961Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="单行函数-通用函数-多表查询使用">
<meta name="twitter:description" content="####sql语句的注意点  sql语言不区分大小写 关键字不能被缩写也不能被分行 各子句一般要分行写 使用缩进提高语句可读性。  ####基本的sql SELECT语句 123456789101112desc employees; 		// 获取employees的表结构 这个是sql plus中才有的SELECT * from employees;  //查询表中所有数据SELECT EMPL">
  
    <link rel="alternate" href="/atom.xml" title="Died line 的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/plugin/bganimation/bg.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="/我的头像.jpg">
    <h2 class="author">Died line</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>28</strong><br>文章</div></a>
      <a href="/categories"><div><strong>9</strong><br>分类</div></a>
      <a href="/tags"><div><strong>26</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main"><article id="page-" class="wow slideInRight article article-type-page" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/oracle-单行函数-通用函数-多表查询使用/index.html" class="article-date">
  <time class="post-time" datetime="2018-12-20T15:32:55.000Z" itemprop="datePublished">
    <span class="post-month">12月</span><br/>
    <span class="post-day">20</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      单行函数-通用函数-多表查询使用
    </h1>
  

        <div>
          
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>####sql语句的注意点</p>
<ul>
<li>sql语言不区分大小写</li>
<li>关键字不能被缩写也不能被分行</li>
<li>各子句一般要分行写</li>
<li>使用缩进提高语句可读性。</li>
</ul>
<p>####基本的sql SELECT语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">desc employees; 		// 获取employees的表结构 这个是sql plus中才有的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">from</span> employees;  //查询表中所有数据</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> EMPLOYEE_ID ,FIRST_NAME, LAST_NAME <span class="keyword">from</span> employees;	//只查询所选的字段的值</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> last_name,salary,<span class="number">12</span>*salary + <span class="number">1000</span></span><br><span class="line"><span class="keyword">from</span> employees   可以在<span class="keyword">select</span>语句中使用乘法来算一年的工资</span><br><span class="line"></span><br><span class="line"> <span class="keyword">select</span> <span class="keyword">sysdate</span>,<span class="keyword">sysdate</span> + <span class="number">1</span>,<span class="keyword">sysdate</span> - <span class="number">1</span></span><br><span class="line">  <span class="number">2</span>  <span class="keyword">from</span> dual;  对当前日期进行加减运算 日期不能做乘除</span><br></pre></td></tr></table></figure>
<p>####空值进行乘除操作<br>– 空值不同于0，凡是空值参与的运算结果都为空<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id ,salary,salary*(<span class="number">1</span> + commission_pct)</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure></p>
<p>####给输出的值起别名，输出结果是使用别名表示的<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id <span class="keyword">id</span>,last_name <span class="keyword">name</span>,<span class="number">12</span>*salary salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure></p>
<p>#####如果你想要将别名小写，可以将别名加上双引号，别名小写，输出结果就是小写<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id <span class="string">"id"</span>,last_name <span class="string">"name"</span>,<span class="number">12</span>*salary <span class="string">"salary"</span></span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure></p>
<p>#####还有一种取别名的方式是加上as但是没必要跟不加是一样的</p>
<p>####连接符||的使用，可以将多列合并,在sql中是使用单引号表示字符串,sql中只有是写别名的时候使用双引号<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name||<span class="string">'`s job is '</span>||job_id <span class="keyword">as</span> details</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure></p>
<p>输出</p>
<pre><code>DETAILS
---------------------------------------------
Walsh`s job is SH_CLERK
Feeney`s job is SH_CLERK
OConnell`s job is SH_CLERK
Grant`s job is SH_CLERK
Whalen`s job is AD_ASST
Hartstein`s job is MK_MAN
Fay`s job is MK_REP
Mavris`s job is HR_REP
Baer`s job is PR_REP
Higgins`s job is AC_MGR
Gietz`s job is AC_ACCOUNT
</code></pre><p>#####distinct 关键字去重一列重复的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> department_id <span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure>
<p>####过滤和排序数据<br>查询员工id大于200的<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,first_name,last_name </span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> employee_id&gt;<span class="number">200</span></span><br></pre></td></tr></table></figure></p>
<p>查询所有工资大于5000的员工<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,first_name,last_name,salary </span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary&gt;<span class="number">5000</span></span><br></pre></td></tr></table></figure></p>
<p>查询工资大于4000小于7000的员工<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,hire_date,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary &gt;= <span class="number">4000</span> <span class="keyword">and</span> salary &lt; <span class="number">7000</span></span><br></pre></td></tr></table></figure></p>
<p>查询lastname = Higgins 的员工</p>
<p>#####注意字符串和日期需要加单引号<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,first_name,last_name,salary </span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> last_name = <span class="string">'Higgins'</span></span><br></pre></td></tr></table></figure></p>
<p>查询日期等于1994-6-7的员工姓名</p>
<p>#####注意日期格式需要像下面这样写</p>
<p>######第一种转换方法<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,hire_date</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> hire_date = <span class="string">'7-6月-1994'</span></span><br></pre></td></tr></table></figure></p>
<p>######第二种转换方法（推荐）注意当你格式化时间的时候如果前面有0必须加<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,hire_date</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="comment">--where hire_date = '7-6月-1994'</span></span><br><span class="line"><span class="keyword">where</span> to_char(hire_date,<span class="string">'yyyy-mm-dd'</span>) = <span class="string">'1994-06-07'</span></span><br></pre></td></tr></table></figure></p>
<p>####过滤条件的操作符</p>
<p>= 等于(不是==)</p>
<p>> 大于</p>
<p>>= 大于等于</p>
<p>&lt; 小于</p>
<p>&lt;= 小于等于</p>
<p>&lt;&gt; 不等于 （也可以使用!=）</p>
<p>:= 赋值</p>
<p>####其他比较运算符</p>
<p>between …. and …  在两个值之间</p>
<p>如：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">select</span> last_name,hire_date,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="comment">--where salary &gt;= 4000 and salary &lt;= 7000</span></span><br><span class="line"><span class="keyword">where</span> salary <span class="keyword">between</span> <span class="number">4000</span> <span class="keyword">and</span> <span class="number">7000</span></span><br></pre></td></tr></table></figure></p>
<p>in(set)        等于值列表中的一个<br>和使用or的效果是一样的不过更简洁<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,department_id,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="comment">--where department_id = 90 or department_id = 80 or department_id = 70</span></span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">in</span>(<span class="number">70</span>,<span class="number">80</span>,<span class="number">90</span>)</span><br></pre></td></tr></table></figure></p>
<p>like 模糊查询</p>
<p>#####查询所有姓名最后一个字符是a的员工<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,department_id,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="comment">--查询所有姓名最后一个字符是a的员工</span></span><br><span class="line"><span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'%a'</span></span><br></pre></td></tr></table></figure></p>
<p>#####查询所有姓名包含a的员工<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">select</span> last_name,department_id,salary</span><br><span class="line">	<span class="keyword">from</span> employees</span><br><span class="line">	<span class="comment">--查询所有姓名包含a的员工</span></span><br><span class="line">	<span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'%a%'</span></span><br><span class="line">#####查询所有姓名第二位是字符a的员工  加下划线代表一个占位符</span><br><span class="line">	<span class="keyword">select</span> last_name,department_id,salary</span><br><span class="line">	<span class="keyword">from</span> employees</span><br><span class="line">	<span class="comment">--查询所有姓名第二位是字符a的员工</span></span><br><span class="line">	<span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'_a%'</span></span><br><span class="line">#####查询姓名中包含_的员工</span><br><span class="line">#####注意需要使用\或者任意字符转义  并且在后面使用escape关键字代表那个字符是转义字符</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">select</span> last_name,department_id,salary</span><br><span class="line">	<span class="keyword">from</span> employees</span><br><span class="line">	<span class="comment">--查询所有姓名中含有_的员工</span></span><br><span class="line">	<span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'%\_%'</span> escape <span class="string">'\'</span></span><br></pre></td></tr></table></figure></p>
<p>####is null 判断为空 is not null 非空<br>查询commission_pct中所有的空值<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,department_id,salary,commission_pct</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="literal">null</span></span><br></pre></td></tr></table></figure></p>
<p>####排序 order by</p>
<p>查询工作部门id等于80的员工 按照工资从小到大排序<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,department_id,salary,commission_pct</span><br><span class="line"><span class="keyword">from</span> employees </span><br><span class="line"><span class="keyword">where</span> department_id = <span class="number">80</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">asc</span></span><br></pre></td></tr></table></figure></p>
<p>查询工作部门id等于80的员工，按照工资从大到小排序<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,department_id,salary,commission_pct</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id = <span class="number">80</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span></span><br></pre></td></tr></table></figure></p>
<p>首选工资从低到高如果工资一样按照last_name来排序<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,department_id,salary,commission_pct</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="comment">--where department_id = 80</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">asc</span>,last_name <span class="keyword">asc</span></span><br></pre></td></tr></table></figure></p>
<p>计算一年的工资按照一年的工资来排序<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,department_id,salary,commission_pct,salary *<span class="number">12</span> anunal_sal</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="comment">--where department_id = 80</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> anunal_sal</span><br></pre></td></tr></table></figure></p>
<p>####练习</p>
<p>1.两种查询指定日期的方式<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,hire_date</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="comment">--where hire_date = '24-4月-1998'</span></span><br><span class="line"><span class="keyword">where</span> to_char(hire_date,<span class="string">'yyyy-mm-dd'</span>) = <span class="string">'1998-04-24'</span></span><br></pre></td></tr></table></figure></p>
<p>2.查询工资在5000-8000的员工 按照从大到小排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary &gt;= <span class="number">5000</span> <span class="keyword">and</span> salary &lt;=<span class="number">8000</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>
<p>3.查询last_name中含有_的员工信息<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,last_name,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'%\_%'</span> escape <span class="string">'\'</span></span><br></pre></td></tr></table></figure></p>
<p>4.选择在1994年雇佣的员工姓名和雇佣时间</p>
<p>第一种方法<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,hire_date</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> hire_date <span class="keyword">like</span> <span class="string">'%94'</span></span><br></pre></td></tr></table></figure></p>
<p>第二种方式（推荐）<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,hire_date</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> to_char(hire_date,<span class="string">'yyyy'</span>) = <span class="string">'1994'</span></span><br></pre></td></tr></table></figure></p>
<p>5.选择公司中没有管理者的员工姓名的job_id<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,job_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> manager_id <span class="keyword">is</span> <span class="literal">null</span></span><br></pre></td></tr></table></figure></p>
<p>6.选择公司中有奖金的员工姓名，工资和奖金级别<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">select</span> last_name,salary,commission_pct </span><br><span class="line">	<span class="keyword">from</span> employees</span><br><span class="line">	<span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string">7.选择公司中第三个字母是a的员工</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span>	</span><br><span class="line">	<span class="keyword">select</span> last_name,salary</span><br><span class="line">	<span class="keyword">from</span> employees</span><br><span class="line">	<span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'__a%'</span></span><br></pre></td></tr></table></figure></p>
<p>8.选择公司姓名中有a和e的员工</p>
<p>第一种方式<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span>  last_name <span class="keyword">like</span> <span class="string">'%a%'</span> <span class="keyword">and</span> last_name <span class="keyword">like</span> <span class="string">'%e%'</span></span><br></pre></td></tr></table></figure></p>
<p>第二种方式<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span>  last_name <span class="keyword">like</span> <span class="string">'%a%e%'</span> <span class="keyword">or</span> last_name <span class="keyword">like</span> <span class="string">'%e%a%'</span></span><br></pre></td></tr></table></figure></p>
<p>####单行函数</p>
<p>#####大小写控制函数</p>
<p>lower 小写</p>
<p>upper 大写</p>
<p>initcap 保持不变<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">lower</span>(<span class="string">'LIYANILOVEYOU'</span>),<span class="keyword">upper</span>(<span class="string">'zeixihuan'</span>),initcap(<span class="string">'AskASDJAL'</span>)</span><br><span class="line"><span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure></p>
<p>当你不清楚字符串是大小写的时候可以全转成小写查询<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">lower</span>(last_name) = <span class="string">'king'</span></span><br></pre></td></tr></table></figure></p>
<p>####字符控制函数</p>
<ul>
<li><p>concat 字符串拼接</p>
</li>
<li><p>substr 字符串截取从第一个数开始 取第二个数的长度</p>
</li>
<li><p>length 判断字符串的长度</p>
</li>
</ul>
<p>例1<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(<span class="string">'hello'</span>,<span class="string">'world'</span>),<span class="keyword">substr</span>(<span class="string">'hello,world'</span>,<span class="number">2</span>,<span class="number">4</span>),<span class="keyword">length</span>(<span class="string">'hello,world!'</span>)</span><br><span class="line"><span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>instr 判断单个字符在字符串中首次出现的位置，如果不存在就返回0</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">instr</span>(<span class="string">'hello,java'</span>,<span class="string">'l'</span>) </span><br><span class="line"><span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
</li>
<li><p>lpad 这里是将将输出结果变成10位，用空格补齐</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">		<span class="keyword">select</span> employee_id,last_name,<span class="keyword">lpad</span>(salary,<span class="number">10</span>,<span class="string">' '</span>),rpad(salary,<span class="number">10</span>,<span class="string">' '</span>)</span><br><span class="line">		<span class="keyword">from</span> employees</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">* trim 只去除首位和末位</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span>	</span><br><span class="line">		<span class="keyword">select</span> <span class="keyword">trim</span>(<span class="string">'h'</span> <span class="keyword">from</span> <span class="string">'hello,hworldh'</span>) <span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
</li>
<li><p>replace 将第二个字符替换成第三个字符 是替换所有的字符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">		<span class="keyword">select</span> <span class="keyword">replace</span>(<span class="string">'abcbdb'</span>,<span class="string">'b'</span>,<span class="string">'m'</span>) </span><br><span class="line">		<span class="keyword">from</span> dual</span><br><span class="line"><span class="string">``</span><span class="string">`		</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">* round  保留小数 四舍五入</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span>		</span><br><span class="line">		<span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">22.345</span>,<span class="number">2</span>),<span class="keyword">round</span>(<span class="number">436.34</span>,<span class="number">-2</span>),<span class="keyword">round</span>(<span class="number">436.34</span>)</span><br><span class="line">		<span class="keyword">from</span> dual</span><br><span class="line">		<span class="comment">--结果</span></span><br><span class="line">		<span class="keyword">ROUND</span>(<span class="number">22.345</span>,<span class="number">2</span>) <span class="keyword">ROUND</span>(<span class="number">436.34</span>,<span class="number">-2</span>) <span class="keyword">ROUND</span>(<span class="number">436.34</span>)</span><br><span class="line">		<span class="comment">--------------- ---------------- -------------</span></span><br><span class="line">		          <span class="number">22.35</span>              <span class="number">400</span>           <span class="number">436</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>trunc 保留小数 全部舍去</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> trunc(<span class="number">22.345</span>,<span class="number">2</span>),trunc(<span class="number">436.34</span>,<span class="number">-2</span>),trunc(<span class="number">436.34</span>)</span><br><span class="line"><span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>求日期雇佣日期到当前日期的天数使用trunc 球余<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,last_name,trunc(<span class="keyword">sysdate</span>-hire_date) wored_day</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure></p>
<ul>
<li>mod求余</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">mod</span>(<span class="number">1100</span>,<span class="number">300</span>) <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure>
<p>####日期函数</p>
<ul>
<li>month_between                    两个日期相差的月数</li>
<li>add_months                    向指定日期加上若干的月数</li>
<li>next_day                        指定日期的下一个星期x对应的日期</li>
<li>last_day                        本月的最后一天</li>
<li>round                            日期四舍五入</li>
<li><p>trunc                            日期截断</p>
</li>
<li><p>求减去三个月的时候，加上两个月的时间，下个星期日的时间</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> add_months(<span class="keyword">sysdate</span>,<span class="number">-3</span>),add_months(<span class="keyword">sysdate</span>,<span class="number">2</span>),next_day(<span class="keyword">sysdate</span>,<span class="string">'星期日'</span>) <span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
</li>
<li><p>来公司的员工中hiredate是每个月倒数第二天来公司的员工有哪些</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--来公司的员工中hiredate是每个月倒数第二天来公司的员工有哪些</span></span><br><span class="line"><span class="keyword">select</span> last_name,hire_date</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> hire_date = <span class="keyword">last_day</span>(hire_date<span class="number">-1</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取当前月份最后一天减2的日期</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">last_day</span>(<span class="keyword">sysdate</span>)<span class="number">-2</span> <span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取当前月份的四舍五入的值，当前小时的截断值（就算大于5也不取）<br>*</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="keyword">sysdate</span>,<span class="string">'month'</span>),<span class="keyword">round</span>(<span class="keyword">sysdate</span>,<span class="string">'mm'</span>),trunc(<span class="keyword">sysdate</span>,<span class="string">'hh'</span>)</span><br><span class="line"><span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>####隐式数据类型转换</p>
<p>####date &lt;===&gt; varchar2 &lt;===&gt; number<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">'12'</span>+<span class="number">2</span> <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sysdate</span>+<span class="number">2</span> <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure></p>
<p>####显示类型转换</p>
<ul>
<li>使用to_char 来转换日期</li>
<li>使用to_date可以将字符串转成日期</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> hire_date <span class="keyword">from</span> employees</span><br><span class="line"><span class="comment">--where hire_date = '7-6月-94'</span></span><br><span class="line"><span class="comment">--where to_char(hire_date,'yyyy-mm-dd') = '1994-06-07'</span></span><br><span class="line"><span class="keyword">where</span> <span class="keyword">to_date</span>(<span class="string">'1994-06-07'</span>,<span class="string">'yyyy-mm-dd'</span>) = hire_date</span><br></pre></td></tr></table></figure>
<ul>
<li><p>使用to_char将雇佣日期转换成指定的格式    </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,to_char(hire_date,<span class="string">'yyyy"年"mm"月"dd"日"'</span>) <span class="string">"雇佣时间"</span></span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> to_char(hire_date,<span class="string">'yyyy"年"mm"月"dd"日"'</span>) = <span class="string">'1994年06月07日'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将数字转换成字符串</p>
</li>
<li>如果需要前面需要补0就使用000，不然就直接使用999就是数据转字符串的格式</li>
<li><p>如果使用的是美元就在0前面加上$，本地货币使用L </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> to_char(<span class="number">1234567.89</span>,<span class="string">'$000,999,99.99'</span>) <span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
</li>
<li><p>将字符串转换为数字</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> to_number(<span class="string">'￥012,345,67.89'</span>,<span class="string">'L000,000,99.99'</span>) +<span class="number">1</span></span><br><span class="line"><span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>###通用函数</p>
<ul>
<li>NVL(expr1,expr2)    <ul>
<li>当expr1中的结果为空的时候，将expr1替换成expr2</li>
<li>如例子：使用nvl就能将空值替换成0从而输出结果<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--求公司员工的年薪 （含commission_pct）</span></span><br><span class="line"><span class="keyword">select</span> employee_id last_name,salary*<span class="number">12</span>*(<span class="number">1</span>+nvl(commission_pct,<span class="number">0</span>)) annual_salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--因为字段类型原本是使用数字你用字符替换数字需要使用to_char来替换</span></span><br><span class="line"><span class="comment">--输出last_name department_id 当department为空时，将它显示成'没有部门'</span></span><br><span class="line"><span class="keyword">select</span> last_name,nvl(to_char(department_id,<span class="string">'999999'</span>),<span class="string">'没有部门'</span>)</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure>
<ul>
<li><p>NVL2(expr1,expr2，expr3)</p>
<ul>
<li>nvl2是nvl的一种特殊化，为空返回expr3,不为空返回expr2<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">--查询奖金的奖金率，若为空，返回0.01</span></span><br><span class="line"><span class="comment">--不为空，返回实际奖金率+0.015</span></span><br><span class="line"><span class="keyword">select</span> last_name,commission_pct,nvl2(commission_pct,commission_pct+<span class="number">0.015</span>,<span class="number">0.01</span>)</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>NULLIF(expr1,expr2)</p>
</li>
<li>COALESE(expr1,expr2,….)</li>
</ul>
<p>####条件表达式</p>
<p>#####case的使用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--查询部门号10,20,30的员工信息</span></span><br><span class="line"><span class="comment">--如果是部门10，打印工资的1.1倍</span></span><br><span class="line"><span class="comment">--如果是20，打印工资的1.2倍</span></span><br><span class="line"><span class="comment">--是30,打印工资的1.3倍</span></span><br><span class="line"><span class="keyword">select</span> employee_id,last_name,department_id,<span class="keyword">case</span> department_id <span class="keyword">when</span> <span class="number">10</span> <span class="keyword">then</span> salary*<span class="number">1.1</span></span><br><span class="line">                                                              <span class="keyword">when</span> <span class="number">20</span> <span class="keyword">then</span> salary*<span class="number">1.2</span></span><br><span class="line">                                                              <span class="keyword">else</span> salary*<span class="number">1.3</span> <span class="keyword">end</span> new_sal</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">in</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>)</span><br></pre></td></tr></table></figure>
<p>#####或者使用decode来实现相同的功能<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--查询部门号10,20,30的员工信息</span></span><br><span class="line"><span class="comment">--如果是部门10，打印工资的1.1倍</span></span><br><span class="line"><span class="comment">--如果是20，打印工资的1.2倍</span></span><br><span class="line"><span class="comment">--是30,打印工资的1.3倍</span></span><br><span class="line"><span class="keyword">select</span> employee_id,last_name,department_id,<span class="keyword">decode</span>(department_id,<span class="number">10</span>,<span class="number">1.10</span> * salary,</span><br><span class="line">                                                                <span class="number">20</span>,<span class="number">1.20</span> * salary,</span><br><span class="line">                                                                <span class="number">30</span>,<span class="number">1.30</span> * salary,</span><br><span class="line">                                                                salary)new_sal</span><br><span class="line"><span class="keyword">from</span> employees    </span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">in</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>)</span><br></pre></td></tr></table></figure></p>
<p>####单行函数的练习题</p>
<ul>
<li>打印出”20018年12月10日 9:25:10” 格式的当前系统的日期和时间</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--"20018年12月10日 9:25:10" 格式的当前系统的日期和时间</span></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'yyyy"年"mm"月"dd"日" hh:mi:ss'</span>)</span><br><span class="line"><span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
<ul>
<li><p>格式化数字  123456 转成123,456.00</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> to_char(<span class="number">123456</span>,<span class="string">'999,999.99'</span>)</span><br><span class="line"><span class="keyword">from</span> dual</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询员工编号姓名工资和工资1.2倍的结果，用new_salary表示</p>
</li>
<li><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,last_name,salary,salary*<span class="number">1.2</span> new_salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure>
</li>
<li><p>将员工的姓名按照首字母排序，查询姓名的长度</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,<span class="keyword">length</span>(last_name)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> last_name <span class="keyword">asc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查询员工的姓名并写出员工工作的月份数、</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,hire_date,<span class="keyword">round</span>(months_between(<span class="keyword">sysdate</span>,hire_date) ,<span class="number">1</span>)worked_month</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询员工的姓名并写出员工工作的月份数、并且按月份数降序排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,hire_date,<span class="keyword">round</span>(months_between(<span class="keyword">sysdate</span>,hire_date) ,<span class="number">1</span>)worked_month</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> worked_month <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>6.做一个查询，产生下面的结果</p>
</li>
<li><pre><code>&lt;last_name&gt; earns &lt;salary&gt; monthly but wants &lt;salary*3&gt;
Dream Salary
King earns $24000 monthly but wants $72000
</code></pre></li>
</ul>
<p>sql<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name||<span class="string">'earns'</span>||to_char(salary,<span class="string">'$999999'</span>)||<span class="string">'monthly but wants'</span>||to_char(salary * <span class="number">3</span>,<span class="string">'$999999'</span>)</span><br><span class="line">dream_salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>7.使用decode函数，按照下面的条件：</p>
<pre><code>job                  grade
AD_PRES                A
ST_MAN               B
IT_PROG              C
SA_REP                D
ST_CLERK               E
产生下面的结果    
Last_name    Job_id    Grade
king    AD_PRES    A  
</code></pre></li>
</ul>
<p>sql<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,job_id,<span class="keyword">decode</span>(job_id,<span class="string">'AD_PRES'</span>,<span class="string">'A'</span>,</span><br><span class="line">                                       <span class="string">'ST_MAN'</span>,<span class="string">'B'</span>,</span><br><span class="line">                                       <span class="string">'IT_PROG'</span>,<span class="string">'C'</span>,</span><br><span class="line">                                       <span class="string">'SA_REP'</span>,<span class="string">'D'</span>,</span><br><span class="line">                                       <span class="string">'ST_CLERK'</span>,<span class="string">'E'</span>) grade</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure></p>
<p>使用case重写一遍这个题<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> last_name,job_id,<span class="keyword">case</span> job_id <span class="keyword">when</span> <span class="string">'AD_PRES'</span> <span class="keyword">then</span> <span class="string">'A'</span></span><br><span class="line">                                     <span class="keyword">when</span> <span class="string">'ST_MAN'</span> <span class="keyword">then</span> <span class="string">'B'</span></span><br><span class="line">                                     <span class="keyword">when</span> <span class="string">'IT_PROG'</span> <span class="keyword">then</span> <span class="string">'C'</span></span><br><span class="line">                                     <span class="keyword">when</span><span class="string">'SA_REP'</span> <span class="keyword">then</span> <span class="string">'D'</span></span><br><span class="line">                                     <span class="keyword">when</span> <span class="string">'ST_CLERK'</span> <span class="keyword">then</span> <span class="string">'E'</span></span><br><span class="line">                                     <span class="keyword">else</span> job_id <span class="keyword">end</span>  grade</span><br><span class="line"><span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure></p>
<p>###多表查询</p>
<p>####如果没有过滤条件就会出现笛卡尔积错误</p>
<p>####联合departments，和employees表进行查询 使用where进行等值连接<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employees.employee_id,employees.department_id,departments.department_name</span><br><span class="line"><span class="keyword">from</span> employees,departments</span><br><span class="line"><span class="keyword">where</span> employees.department_id = departments.department_id</span><br></pre></td></tr></table></figure></p>
<p>将数据表重命名以减少代码量，如果数据仅存在一个表中其前缀也可以省略<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,e.department_id,department_name</span><br><span class="line"><span class="keyword">from</span> employees e,departments d</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id</span><br></pre></td></tr></table></figure></p>
<p>联合三个表进行查询<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">select</span> employee_id,e.department_id,department_name,l.city</span><br><span class="line">	<span class="keyword">from</span> employees e,departments d,locations l</span><br><span class="line">	<span class="keyword">where</span> e.department_id = d.department_id <span class="keyword">and</span> d.location_id = l.location_id</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">####非等值连接  根据employees 中的工资对应job_grades表中的等级来实现对员工工资的分级</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span>	</span><br><span class="line">	<span class="keyword">select</span> employee_id,last_name,salary,grade_level</span><br><span class="line">	<span class="keyword">from</span> employees e,job_grades j</span><br><span class="line">	<span class="keyword">where</span> e.salary <span class="keyword">between</span> j.lowest_sal <span class="keyword">and</span> j.highest_sal</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">####内连接和外连接的区别</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">* 内连接：合并具有一个列的两个以上的表的行，结果集中不含一个表与另一个表中不匹配的行</span></span><br><span class="line"><span class="string">* 外连接：两个表在连接过程中除了返回满足连接条件的行以外，还返回左右表中不满足条件的行，这种连接称为外连接，没有匹配的行时，结果集返回是null，外连接的where子句类似内连接，但连接条件没有匹配行的表后面要加外连接运算符，即用圆括号括起来的加号（+）</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">####左外连接 就是当左表中的信息右表没有时，将右表值使用null替换</span></span><br><span class="line"><span class="string">#####这里就是输出所有员工的值，就算有员工没有部门也输出</span></span><br><span class="line"><span class="string">第一种方式</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span></span><br><span class="line">	<span class="keyword">select</span> employee_id,e.department_id,department_name</span><br><span class="line">	<span class="keyword">from</span> employees e,departments d</span><br><span class="line">	<span class="keyword">where</span> e.department_id = d.department_id(+)</span><br></pre></td></tr></table></figure></p>
<p>第二种方式<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,e.department_id,department_name,city</span><br><span class="line"><span class="keyword">from</span> employees e  <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> departments d </span><br><span class="line"><span class="keyword">on</span> e.department_id = d.department_id</span><br></pre></td></tr></table></figure></p>
<p>####右外连接 当右表的信息左表没有将坐标用null值替换</p>
<p>#####这里就是输出所有部门的信息，就算有的部门中一个人都没有也输出<br>第一种方式<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,e.department_id,department_name</span><br><span class="line"><span class="keyword">from</span> employees e,departments d</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id(+)</span><br></pre></td></tr></table></figure></p>
<p>第二种方式<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,e.department_id,department_name</span><br><span class="line"><span class="keyword">from</span> employees e  <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> departments d </span><br><span class="line"><span class="keyword">on</span> e.department_id = d.department_id</span><br></pre></td></tr></table></figure></p>
<p>####满外连接 同时包含左右外连接的所有信息<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">select</span> employee_id,e.department_id,department_name</span><br><span class="line">	<span class="keyword">from</span> employees e  <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> departments d </span><br><span class="line">	<span class="keyword">on</span> e.department_id = d.department_id</span><br><span class="line"><span class="string">``</span><span class="string">`	</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">####使用natual join 实现外连接  因为natual是使用所有相同的列作为判断条件的所以当你想只使用单个列的条件来判断实现就无法使用</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span></span><br><span class="line">	<span class="keyword">select</span> employee_id,department_id,department_name</span><br><span class="line">	<span class="keyword">from</span> employees <span class="keyword">natural</span> <span class="keyword">join</span> departments</span><br></pre></td></tr></table></figure></p>
<h4 id="使用join-后面使用using-加上判断条件实现对这个列的外连接判断-局限性（必须两个表的做判断的列的名称和参数属性必须相同）"><a href="#使用join-后面使用using-加上判断条件实现对这个列的外连接判断-局限性（必须两个表的做判断的列的名称和参数属性必须相同）" class="headerlink" title="使用join 后面使用using 加上判断条件实现对这个列的外连接判断 局限性（必须两个表的做判断的列的名称和参数属性必须相同）"></a>使用join 后面使用using 加上判断条件实现对这个列的外连接判断 局限性（必须两个表的做判断的列的名称和参数属性必须相同）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,department_id,department_name</span><br><span class="line"><span class="keyword">from</span> employees  <span class="keyword">join</span> departments </span><br><span class="line"><span class="keyword">using</span> (department_id)</span><br></pre></td></tr></table></figure>
<p>####推荐使用这种外连接方式  在前面使用join 后面使用on 加上判定条件<br>实现对两个表的外连接查询<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,e.department_id,department_name</span><br><span class="line"><span class="keyword">from</span> employees e  <span class="keyword">join</span> departments d </span><br><span class="line"><span class="keyword">on</span> e.department_id = d.department_id</span><br></pre></td></tr></table></figure></p>
<p>实现对三个表的外连接查询<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,e.department_id,department_name,city</span><br><span class="line"><span class="keyword">from</span> employees e  <span class="keyword">join</span> departments d </span><br><span class="line"><span class="keyword">on</span> e.department_id = d.department_id</span><br><span class="line"><span class="keyword">join</span> locations l</span><br><span class="line"><span class="keyword">on</span> d.location_id = l.location_id</span><br></pre></td></tr></table></figure></p>
<p>####自连接 查询公司姓名为chen的员工的上司的姓名，工资和邮箱（不使用自连接需要进行两次查询，使用之后一次就够了）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> emp.last_name,manager.last_name,manager.salary,manager.email</span><br><span class="line"><span class="keyword">from</span> employees emp,employees manager</span><br><span class="line"><span class="keyword">where</span> emp.manager_id = manager.employee_id <span class="keyword">and</span> <span class="keyword">lower</span>(emp.last_name) = <span class="string">'chen'</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://diedline.github.io/oracle-单行函数-通用函数-多表查询使用/index.html" data-id="cjqfbkn0t000gakqidkvch24p" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
    
  
</article>



</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">Died line 的博客</h1>
    <h2 class="blog-subtitle">努力学习的小白,   联系QQ1019348254，可以在博客左侧发表评论。</h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="/我的头像.jpg">
    <h2 class="author">Died line</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>28</strong><br>文章</div></a>
      <a href="/categories"><div><strong>9</strong><br>分类</div></a>
      <a href="/tags"><div><strong>26</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="https://github.com/diedline" target="_blank" title="Github">
          Github
        </a>
      
    </div>

    <div class="friend-link">
      <h2>友情链接</h2>
      
        <a class="hvr-bounce-in" href="https://diedline.github.io/关于我" target="_blank" title="我的介绍">
          我的介绍
        </a>
      
    </div>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2018 - 2019 Died line<br>
      由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动 | 
      主题-<a href="https://github.com/ShanaMaid/hexo-theme-shana">Shana</a>
      
    </div>
    
  </div>
</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  <link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">
  <script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>



  <link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">
  <script src="/plugin/galmenu/GalMenu.js"></script>
  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">首页</a>
          
            <a href="/tags" title="" class="menuItem">标签</a>
          
            <a href="/categories" title="" class="menuItem">分类</a>
          
            <a href="/archives" title="" class="menuItem">归档</a>
          
            <a href="/xxxxxxxxx" title="" class="menuItem">xxx</a>
          
            <a href="/xxxxxxx" title="" class="menuItem">xxxx</a>
          
        </div>
        
          <audio id="audio" src="plugin/galmenu/wulusai.mp3"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>
<script src="/js/script.js"></script>



  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>